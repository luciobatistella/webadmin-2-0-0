import{d as v,r as d,x as f,D as x,i as b,c as y,o as w,a as l,t as g,w as r,v as n,u as U}from"./index-COqVfnXd.js";import{g as V,u as k,c as R}from"./users-CEJG0dpH.js";import"./api-DJGMUGZv.js";import"./http-CfBk4xsK.js";import"./AppConstants-096u6u1O.js";const S={class:"space-y-4 p-4"},z={class:"flex items-center gap-3"},C={class:"text-lg font-semibold"},E={class:"ml-auto"},P=["disabled"],B={class:"card p-4 space-y-3"},D={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},F=v({__name:"UserFormView",setup(L){const i=x(),p=U(),s=d({id:null,name:"",email:"",profile:"",role:""}),o=d(!1),u=f(()=>!!i.params.id);async function m(){if(u.value){o.value=!0;try{const a=await V(i.params.id,new URLSearchParams),e=Array.isArray(a==null?void 0:a.data)?a.data[0]:(a==null?void 0:a.data)||a;s.value={id:e.id,name:e.name||e.nome||"",email:e.email||"",profile:e.profile||e.perfil||"",role:e.role||e.cargo||""}}finally{o.value=!1}}}async function c(){o.value=!0;try{const a={...s.value};a.id==null&&delete a.id,s.value.id?await k(a,new URLSearchParams):await R(a,new URLSearchParams),p.push({name:"users"})}finally{o.value=!1}}return b(m),(a,e)=>(w(),y("section",S,[l("header",z,[l("h1",C,g(u.value?"Editar usuário":"Novo usuário"),1),l("div",E,[l("button",{class:"btn btn-secondary mr-2",onClick:e[0]||(e[0]=t=>a.$router.back())},"Voltar"),l("button",{class:"btn btn-primary",onClick:c,disabled:o.value},"Salvar",8,P)])]),l("div",B,[l("div",D,[l("div",null,[e[5]||(e[5]=l("label",{class:"text-xs text-zinc-500"},"Nome",-1)),r(l("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>s.value.name=t),class:"w-full rounded border px-2 py-1"},null,512),[[n,s.value.name]])]),l("div",null,[e[6]||(e[6]=l("label",{class:"text-xs text-zinc-500"},"E-mail",-1)),r(l("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>s.value.email=t),class:"w-full rounded border px-2 py-1"},null,512),[[n,s.value.email]])]),l("div",null,[e[7]||(e[7]=l("label",{class:"text-xs text-zinc-500"},"Perfil",-1)),r(l("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>s.value.profile=t),class:"w-full rounded border px-2 py-1"},null,512),[[n,s.value.profile]])]),l("div",null,[e[8]||(e[8]=l("label",{class:"text-xs text-zinc-500"},"Cargo",-1)),r(l("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>s.value.role=t),class:"w-full rounded border px-2 py-1"},null,512),[[n,s.value.role]])])])])]))}});export{F as default};
