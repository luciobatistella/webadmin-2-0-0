import{d as q,r as l,x as c,i as K,c as b,o as v,k as B,a as t,w as O,b as N,v as W,y as d,E as G,t as n,e as h,F as S,B as A,u as H}from"./index-COqVfnXd.js";import{_ as J}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-Cce2uIDO.js";import{_ as Q}from"./ClientActions.vue_vue_type_script_setup_true_lang-Bsi_lvWs.js";import{l as X}from"./users-CEJG0dpH.js";import"./api-DJGMUGZv.js";import"./http-CfBk4xsK.js";import"./AppConstants-096u6u1O.js";const Y={class:""},Z={class:"mb-6 flex items-center justify-between gap-3"},ee={class:"card p-4"},te={class:"flex flex-wrap items-center gap-4"},se={class:"relative flex-1 min-w-[300px]"},oe={class:"relative"},re={class:"font-medium"},ne={key:0,class:"absolute z-10 mt-2 w-64 bg-white dark:bg-zinc-800 rounded-lg shadow-lg border border-zinc-200 dark:border-zinc-700"},ie={class:"p-4"},le={class:"flex gap-1"},ae={class:"ml-auto text-xs text-zinc-500"},de={class:"mb-3 mt-3"},ue={class:"flex items-center gap-2 border-b border-zinc-200 dark:border-zinc-700"},ce={class:"flex gap-2"},be={class:"grid gap-3 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3"},ve={class:"mb-2 flex items-center justify-between"},me={class:"truncate"},pe={class:"rounded px-2 py-0.5 text-xs bg-zinc-100 dark:bg-zinc-800"},ge={class:"space-y-1 text-xs text-zinc-600 dark:text-zinc-400"},xe={class:"flex justify-between"},fe={class:"truncate max-w-[12rem]"},ke={class:"flex justify-between"},Se=q({__name:"UsersView",setup(ze){const $=H(),m=l([]),k=l(!1),p=l(1),z=l(20),w=l(0),r=l("mais_recentes");function g(o){return String(o||"").normalize("NFD").replace(new RegExp("\\p{Diacritic}+","gu"),"").toLowerCase()}const a=l("todos");function y(o){return!!(o.active??o.ativo??!0)}function _(o){return!y(o)}const x=c(()=>{let o=Array.isArray(m.value)?m.value:[];const e=g(i.value||"");return e&&(o=o.filter(s=>{const u=g(s.name||s.nome||s.usuario),P=g(s.email),E=String(s.id||"");return u.includes(e)||P.includes(e)||E.includes(String(i.value||""))})),o}),j=c(()=>x.value.length),V=c(()=>x.value.filter(y).length),M=c(()=>x.value.filter(_).length),U=c(()=>{let o=x.value;a.value==="ativos"?o=o.filter(y):a.value==="inativos"&&(o=o.filter(_));const e=s=>g(s.name||s.nome||s.usuario);return r.value==="nome"?o=[...o].sort((s,u)=>e(s).localeCompare(e(u))):r.value==="codigo"?o=[...o].sort((s,u)=>(Number(s.id)||0)-(Number(u.id)||0)):o=[...o].sort((s,u)=>(Number(u.id)||0)-(Number(s.id)||0)),o}),L=c(()=>{const o=(p.value-1)*z.value;return U.value.slice(o,o+z.value)}),f=l(!1);function R(){return{nome:"nome",mais_recentes:"mais recentes",codigo:"código"}[r.value]||"mais recentes"}function T(){p.value=1}function F(){i.value="",p.value=1}function I(){window.print()}const i=l("");async function C(){k.value=!0;try{const o=new URLSearchParams;o.append("page",String(p.value)),o.append("limit",String(z.value)),i.value&&o.append("q",i.value);const e=await X(o);Array.isArray(e)?(m.value=e,w.value=e.length):(m.value=(e==null?void 0:e.data)||(e==null?void 0:e.rows)||[],w.value=(e==null?void 0:e.total)||m.value.length)}finally{k.value=!1}}function D(){$.push({name:"user-register"})}return K(C),(o,e)=>(v(),b("section",Y,[B(J),t("header",Z,[e[8]||(e[8]=t("h1",{class:"text-2xl font-semibold"},"Usuários",-1)),B(Q,{class:"ml-auto",onPrint:I,onCreate:D,onAction:()=>{}})]),t("div",ee,[t("div",te,[t("div",se,[e[10]||(e[10]=t("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("svg",{class:"w-4 h-4 text-zinc-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),O(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>i.value=s),onKeyup:G(C,["enter"]),onInput:T,class:d(["w-full pl-10 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-zinc-800 dark:border-zinc-600 dark:text-zinc-100",i.value?"pr-10":"pr-4"]),placeholder:"Buscar por nome ou e-mail"},null,34),[[W,i.value]]),i.value?(v(),b("button",{key:0,onClick:F,class:"absolute inset-y-0 right-0 pr-3 flex items-center text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300",type:"button"},[...e[9]||(e[9]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):N("",!0)]),t("div",oe,[t("button",{onClick:e[1]||(e[1]=s=>f.value=!f.value),class:d(["flex items-center gap-2 px-3 py-2 text-sm border border-zinc-300 rounded-lg hover:bg-zinc-50 dark:border-zinc-600 dark:hover:bg-zinc-800",{"bg-blue-50 border-blue-300 text-blue-700 dark:bg-blue-900/20 dark:border-blue-600 dark:text-blue-300":f.value||r.value!=="mais_recentes"}])},[e[11]||(e[11]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1)),t("span",re,n(R()),1),e[12]||(e[12]=t("span",{class:"text-xs text-zinc-500"},"por situação",-1)),e[13]||(e[13]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))],2),f.value?(v(),b("div",ne,[t("div",ie,[e[14]||(e[14]=t("h3",{class:"text-sm font-medium text-zinc-900 dark:text-zinc-100 mb-3"},"Ordenar por",-1)),t("div",le,[t("button",{onClick:e[2]||(e[2]=s=>r.value="nome"),class:d(["px-2 py-1 text-xs rounded border transition-colors",r.value==="nome"?"border-2 border-blue-600 text-blue-600 bg-blue-50 dark:bg-blue-900/20":"bg-white text-zinc-700 border-zinc-300 hover:bg-zinc-50 dark:bg-zinc-800 dark:text-zinc-300 dark:border-zinc-600 dark:hover:bg-zinc-700"])}," nome ",2),t("button",{onClick:e[3]||(e[3]=s=>r.value="mais_recentes"),class:d(["px-2 py-1 text-xs rounded border transition-colors",r.value==="mais_recentes"?"border-2 border-blue-600 text-blue-600 bg-blue-50 dark:bg-blue-900/20":"bg-white text-zinc-700 border-zinc-300 hover:bg-zinc-50 dark:bg-zinc-800 dark:text-zinc-300 dark:border-zinc-600 dark:hover:bg-zinc-700"])}," mais recentes ",2),t("button",{onClick:e[4]||(e[4]=s=>r.value="codigo"),class:d(["px-2 py-1 text-xs rounded border transition-colors",r.value==="codigo"?"border-2 border-blue-600 text-blue-600 bg-blue-50 dark:bg-blue-900/20":"bg-white text-zinc-700 border-zinc-300 hover:bg-zinc-50 dark:bg-zinc-800 dark:text-zinc-300 dark:border-zinc-600 dark:hover:bg-zinc-700"])}," código ",2)])])])):N("",!0)]),t("div",ae,"Página "+n(p.value)+" • "+n(w.value)+" registros",1)])]),t("div",de,[t("nav",ue,[t("div",ce,[t("button",{onClick:e[5]||(e[5]=s=>a.value="todos"),class:d([a.value==="todos"?"border-b-2 border-blue-600 text-blue-700":"text-zinc-600","px-3 py-2 text-sm"])},[e[15]||(e[15]=h("Todos ",-1)),t("span",null,"("+n(j.value)+")",1)],2),t("button",{onClick:e[6]||(e[6]=s=>a.value="ativos"),class:d([a.value==="ativos"?"border-b-2 border-blue-600 text-blue-700":"text-zinc-600","px-3 py-2 text-sm"])},[e[16]||(e[16]=h("Ativos ",-1)),t("span",null,"("+n(V.value)+")",1)],2),t("button",{onClick:e[7]||(e[7]=s=>a.value="inativos"),class:d([a.value==="inativos"?"border-b-2 border-blue-600 text-blue-700":"text-zinc-600","px-3 py-2 text-sm"])},[e[17]||(e[17]=h("Inativos ",-1)),t("span",null,"("+n(M.value)+")",1)],2)])])]),t("div",be,[k.value?(v(),b(S,{key:0},A(6,s=>t("div",{key:"sk"+s,class:"card p-3 animate-pulse"},[...e[18]||(e[18]=[t("div",{class:"mb-2 h-4 w-2/3 rounded bg-zinc-200 dark:bg-zinc-800"},null,-1),t("div",{class:"space-y-2 text-xs"},[t("div",{class:"h-3 w-1/3 rounded bg-zinc-200 dark:bg-zinc-800"}),t("div",{class:"h-3 w-1/2 rounded bg-zinc-200 dark:bg-zinc-800"})],-1)])])),64)):(v(!0),b(S,{key:1},A(L.value,s=>(v(),b("article",{key:s.id,class:"card p-3"},[t("header",ve,[t("strong",me,n(s.name||s.nome||s.usuario||"—"),1),t("span",pe,"#"+n(s.id),1)]),t("dl",ge,[t("div",xe,[e[19]||(e[19]=t("dt",{class:"font-medium"},"E-mail",-1)),t("dd",fe,n(s.email||"-"),1)]),t("div",ke,[e[20]||(e[20]=t("dt",{class:"font-medium"},"Perfil",-1)),t("dd",null,n(s.role||s.perfil||"-"),1)])])]))),128))])]))}});export{Se as default};
