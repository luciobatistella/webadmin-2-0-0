import{a as u}from"./http-CfBk4xsK.js";import{J as c}from"./index-COqVfnXd.js";function i(){var n;try{const o=localStorage.getItem("authResult");if(!o)return null;const t=JSON.parse(o);return(t==null?void 0:t.token)||(t==null?void 0:t.access_token)||((n=t==null?void 0:t.data)==null?void 0:n.token)||null}catch{return null}}function m(n){const o=u.create({baseURL:n,timeout:2e4});return o.interceptors.request.use(t=>{const e=i();if(e){const s=t.headers||{};s.Authorization=`Bearer ${e}`,t.headers=s}return t}),o.interceptors.response.use(t=>t,t=>{var s,a;const e=(s=t==null?void 0:t.response)==null?void 0:s.status;return e===401&&(localStorage.removeItem("authResult"),c.push({name:"login"})),e===403&&console.warn("[api][403] Acesso negado"),e&&e>=500&&console.error("[api][server-error]",((a=t==null?void 0:t.response)==null?void 0:a.data)||(t==null?void 0:t.message)),Promise.reject(t)}),o}export{m as c};
