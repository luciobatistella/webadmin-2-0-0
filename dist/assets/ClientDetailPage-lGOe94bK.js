import{d as h,x as m,D as C,r as u,i as A,s as z,c as D,o as B,k as d,a as n,t as k,u as N}from"./index-COqVfnXd.js";import{C as P,g as w}from"./ClientEditModal-aEAQAezp.js";import{_ as R}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-Cce2uIDO.js";import"./api-DJGMUGZv.js";import"./http-CfBk4xsK.js";import"./AppConstants-096u6u1O.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const $={class:"space-y-4 p-4"},j={class:"mb-2 flex items-center gap-3"},E={class:"text-2xl font-semibold text-zinc-900 dark:text-zinc-100"},F={class:"mx-auto card p-3"},Y=h({__name:"ClientDetailPage",setup(M){const p=C();N();const i=m(()=>p.params.id),t=u({}),f=u(!0);async function s(){const o=i.value;if(!o){t.value={};return}try{const e=await w(o,new URLSearchParams),c=l=>{if(!l)return"";const r=new Date(l);if(isNaN(r))return"";const v=String(r.getDate()).padStart(2,"0"),x=String(r.getMonth()+1).padStart(2,"0"),S=r.getFullYear();return`${v}/${x}/${S}`},a={...e,id:e.id??o,nome_comercial:e.nome_comercial||e.nomeComercial||e.name||e.nome||e.razao_social||e.razaoSocial||"",razao_social:e.razao_social||e.razaoSocial||"",cnpj:e.cnpj||e.cpf_cnpj||e.document||"",email:e.email||e.email_principal||"",dominio:e.dominio||e.dominioEmp||"",telefone1:e.telefone1||e.telefone||e.phone||e.celular||"",telefone2:e.telefone2||e.phone2||e.celular2||"",faturamento:e.faturamento||"",meio_recebimento:e.meio_recebimento||e.meioRecebimento||"",simples_nacional:typeof e.optanteSimplesNacional=="string"?e.optanteSimplesNacional.toLowerCase()==="sim":!!e.simples_nacional,lista_presenca:(function(){return typeof e.listaPresenca=="string"?e.listaPresenca:(e.com_foto!=null||e.lista_presenca!=null)&&e.com_foto?"Com foto":"Sem foto"})(),situacao_tributaria:e.situacao_tributaria||e.situacaoTributaria||"",tributado_sp:!!(e.tributado_sp??!1),contrato:e.contrato||"",contrato_inicio:e.contrato_inicio||c(e.contratoDataInicio),contrato_fim:e.contrato_fim||c(e.contratoDataFim),orientacoes_faturamento:e.orientacoes_faturamento||e.orientacoesFaturamento||"",locais:Array.isArray(e.locais)?e.locais:[],setores:Array.isArray(e.setores)?e.setores:[],funcoes:Array.isArray(e.funcoes)?e.funcoes:[],usuarios:Array.isArray(e.usuarios)?e.usuarios:[],gestores:Array.isArray(e.gestores)?e.gestores:[],active:e.active??e.ativo??!0?1:0},b=!!(e.cep||e.logradouro||e.numero||e.bairro||e.cidade||e.uf);(!a.locais||a.locais.length===0)&&b&&(a.locais=[{nome:a.nome_comercial||a.razao_social||"",responsavel:"",regiao:"",cep:e.cep||"",logradouro:e.logradouro||"",numero:e.numero||"",complemento:e.complemento||"",bairro:e.bairro||"",cidade:e.cidade||"",uf:e.uf||"",telefone:e.telefone1||"",qrcode_fixo:!1}]),t.value=a}catch(e){console.error("[ClientDetailPage.loadClient]",e),t.value={}}}const _=m(()=>{const o=t.value||{};return o.nome_comercial||o.razao_social||o.name||o.nome||"Cliente"});function g(){}A(s),z(i,s);function y(){}return(o,e)=>(B(),D("section",$,[d(R),n("header",j,[n("h1",E,k(_.value),1),e[0]||(e[0]=n("span",{class:"bg-blue-100 mt-1 text-blue-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded-sm dark:bg-blue-900 dark:text-blue-300"},"Status Cliente",-1))]),n("div",F,[d(P,{asPage:!0,"model-value":f.value,"edit-id":i.value,form:t.value,"onUpdate:modelValue":y,onSave:g},null,8,["model-value","edit-id","form"])])]))}});export{Y as default};
